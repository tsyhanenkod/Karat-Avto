{% extends 'base/main.html' %}
{% load static %}
{% load i18n %}
{% load humanize %}

{% block content %}
    <link rel="stylesheet" href="{% static 'cars/css/car.css' %}">

    <div class="car-details">
        <div class="container">
            <div class="details-inner">
                <div class="car-slider">
                    <div class="image-wraper">
                        <img id="featured" class="car-image" src="{{car.main_image.url}}" alt="">
                    </div>
                    <div class="car-gallery">
                        <img class="car-gallery-img active" src="{{car.main_image.url}}" alt="{{car.mark}} {{car.model}} img">
                        {% for image in car.carimages_set.all %}
                            <img class="car-gallery-img" src="{{image.image.url}}" alt="">
                        {% endfor %}
                    </div>
                </div>

                <div class="car-info">
                    <div class="car-title">
                        <h1 class="car-title">{{car.mark}} {{car.model}}</h1>

                        {% get_current_language as LANGUAGE_CODE %}
                        {% if LANGUAGE_CODE == 'en' %}
                        <h3 class="car-price">{% trans 'Price:' %} {{car.price|intcomma}} $</h3>
                        {% elif LANGUAGE_CODE == 'uk' %}
                        <h3 class="car-price">{% trans 'Price:' %} {{car.price_ua|intcomma}} грн.</h3>
                        {% endif %}
                        <p class="price-descrition">
                            <span>{% trans 'WARNING' %}!</span> {% trans 'In connection with changes in the dollar exchange rate, check the prices with the managers' %}
                        </p>

                        <table class="car-char-table">
                            <tr>
                                <td>
                                    <div class="table-content">
                                        <img class="table-img" src="{% static 'cars/icons/car-fuel.png' %}" alt="">
                                        <p class="car-char">{{car.engine_type}}</p>
                                    </div>
                                </td>
                                <td>
                                    <div class="table-content">
                                        <img class="table-img" src="{% static 'cars/icons/car-transmission.png' %}" alt="">
                                        {% for transmission in car.transmission.all %}
                                        <p class="car-char">{{transmission.name }} </p>
                                        {% endfor %}
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="table-content">
                                        <img class="table-img" src="{% static 'cars/icons/car-year.png' %}" alt="">
                                        <p class="car-char">{{car.year}}</p>
                                    </div>
                                </td>
                                <td>
                                    <div class="table-content">
                                        <img class="table-img" src="{% static 'cars/icons/car-engine.png' %}" alt="">
                                        <p class="car-char">{{car.engine_volume}} {% trans 'cc' %}</p>
                                    </div>
                                </td>
                            </tr>
                        </table>

                        <div class="car-colors">
                            <h6 class="colors-title">{% trans 'Colors:' %}</h6>
                            {% for color in car.color.all %}
                                <a class="color-link" href="#">
                                    <div class="color-preview" style="background-color: #{{color.hex}};"></div>
                                </a>
                            {% endfor %}
                        </div>

                        <button class="offer-button"><h4 class="button-text">{% trans 'Order' %}</h4></button>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!--  Modal Window Block  -->
    <div class="modal-w">
        <div class="modal-window">
            <button class="modal-close">
                <img class="close-img" src="{% static 'cars/icons/cancel.png' %}" alt="">
            </button>
            <div class="modal-container">
                <div class="modal-header">
                    <h5 class="modal-title">{% trans 'Placing an order on' %} "{{car.mark}} {{car.model}}"</h5>
                </div>
                <form action="" class="modal-form" method="POST">
                    {% csrf_token %}
                    <div class="form-content">
                        <div class="form-gloup form-gloup-flex">
                            <label class="form-check-label" for="form-name-label">*</label>
                            <input class="modal-input modal-inp-name" name="form-name" id="form-name-label" type="text" placeholder="name" required minlength="4">
                        </div>
                        <div class="form-gloup">
                            <input class="modal-input modal-inp-email" name="form-email" type="email" placeholder="e-mail"minlength="5">
                        </div>
                        <div class="form-gloup form-gloup-flex">
                            <label class="form-check-label" for="form-tel-label">*</label>
                            <input class="modal-input modal-inp-tel" id="form-tel-label" name="form-tel" type="tel" placeholder="tel" required minlength="10">
                        </div>
                        <div class="form-gloup form-gloup-flex">
                            <label class="form-check-label" for="form-text-label">*</label>
                            <textarea class="modal-input modal-inp-comment" id="form-text-label" name="form-msg" placeholder="message" required></textarea>
                        </div>
                        <div class="form-gloup">
                            <input class="modal-inp-ringup" type="checkbox" name="form-check">
                            <label class="form-label" id="form-check-label">{% trans 'Call back' %}</label>
                        </div>
                        <button class="send-btn" type="submit">{% trans 'Send' %}</button>
                        <p class="all-fields">{% trans 'Fields with' %} <span>*</span> {% trans 'are mandatory to fill out' %}</p>
                    </div>
                </form>
            </div>
        </div>
    </div>


    <div class="tabs-block">
        <div class="container">
            <div class="tabs-inner">
                <div class="tabs" role="tablist">
                    {% if LANGUAGE_CODE == 'en' %}
                    <a class="tab-link active-tab" id="nav-home-tab1" data-toggle="pill" href="#pills-desc1" role="tab" aria-controls="nav-home" aria-selected="true">{% trans 'Description' %}</a>
                    {% else %}
                    <a class="tab-link active-tab" id="nav-home-tab2" data-toggle="pill" href="#pills-desc2" role="tab" aria-controls="nav-home" aria-selected="true">{% trans 'Description' %}</a>
                    {% endif %}
                    <a class="tab-link" id="nav-profile-tab" data-toggle="pill" href="#pills-chars" role="tab" aria-controls="nav-profile" aria-selected="false">{% trans 'Characteristics' %}</a>
                    {% if complects %}
                        <a class="tab-link" id="nav-contact-tab" data-toggle="pill" href="#pills-complects" role="tab" aria-controls="nav-contact" aria-selected="false">{% trans 'Complete sets' %}</a>
                        <a class="tab-link" id="nav-price-tab" data-toggle="pill" href="#pills-price" role="tab" aria-controls="nav-price" aria-selected="false">{% trans 'Prices' %}</a>
                    {% endif %}
                </div>

                <div class="tab-content" id="nav-tabContent">
                    {% if LANGUAGE_CODE == 'en' %}
                        <div class="tab-pane fade show active" id="pills-desc1" role="tabpanel" aria-labelledby="pills-home-tab1">{{car.description_en|safe}}</div>
                    {% else %}
                        <div class="tab-pane fade show active" id="pills-desc2" role="tabpanel" aria-labelledby="pills-home-tab2">{{car.description_uk|safe}}</div>
                    {% endif %}
                    <div class="tab-pane fade" id="pills-chars" role="tabpanel" aria-labelledby="nav-profile-tab">
                        2
                    </div>

                    {% if complects %}
                        <div class="tab-pane fade" id="pills-complects" role="tabpanel" aria-labelledby="nav-contact-tab">
                            3
                        </div>
                        <div class="tab-pane fade" id="pills-price" role="tabpanel" aria-labelledby="nav-price-tab">
                            4
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>


    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script type="text/javascript" src="{% static 'cars/js/car-slider.js' %}"></script>
    <script type="text/javascript" src="{% static 'cars/js/car-desc.js' %}"></script>
    <script type="text/javascript" src="{% static 'cars/js/modal.js' %}"></script>
{% endblock content %}